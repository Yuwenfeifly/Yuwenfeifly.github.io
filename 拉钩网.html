<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title></title>
	<link rel="stylesheet" href="">
	<style>
	*{margin: 0;padding: 0;list-style: none;}
	body{background: #069;}
	#oUl{width:1300px;position: relative;margin:100px auto;}
	#oUl li{width:200px;height:200px;border:5px solid #069;float: left;background:orange;position: relative;overflow: hidden;}
	#oUl li div{width:200px;height:200px;background: skyblue;position: absolute;left:-200px;top:0;}
	</style>
	<script src="js/move1.js"></script>
	<script>
		function findF(obj,ev){
			var oEvent=ev||event;
			var scrollT=document.body.scrollTop || document.documentElement.scrollTop;
			var scrollL=document.body.scrollLeft || document.documentElement.scrollLeft;
			var x=obj.offsetWidth/2+getPos(obj).left-(oEvent.clientX+scrollL);
			var y=obj.offsetHeight/2+getPos(obj).top-(oEvent.clientY+scrollT);

			return Math.round((Math.atan2(y,x)*180/Math.PI+180)/90)%4;
		}
		function getPos(obj){
			var l=0;
			var t=0;
			while(obj){
				l+=obj.offsetLeft;
				t+=obj.offsetTop;
				obj=obj.offsetParent;
			}
			return {left:l,top:t};
		}
		window.onload=window.onscroll=function(){
			var oUl=document.getElementById('oUl');
			var aLi=oUl.children;
			
			for(var i=0;i<aLi.length;i++){
				aLi[i].onmouseover=function(ev){
					var oEvent=ev||event;
					var oFrom=oEvent.fromElement||oEvent.relatedTarget;
					var oSon=this.children[0];

					if(this.contains(oFrom))return false;
					switch(findF(this,ev)){
						case 0:
						oSon.style.left='201px';
						oSon.style.top=0;
						break;
						case 1:
						oSon.style.left=0;
						oSon.style.top='201px';
						break;
						case 2:
						oSon.style.left='-200px';
						oSon.style.top=0;
						break;
						case 3:
						oSon.style.left=0;
						oSon.style.top='-201px';
						break;
					}
					move(oSon,{left:0,top:0},{time:400});
				};

				aLi[i].onmouseout=function(ev){
					var oEvent=ev||event;
					var oFrom=oEvent.toElement||oEvent.relatedTarget;
					var oSon=this.children[0];

					if(this.contains(oFrom))return false;
					switch(findF(this,ev)){
						case 0:
						move(oSon,{left:201,top:0},{time:400});
						break;
						case 1:
						move(oSon,{left:0,top:201},{time:400});
						break;
						case 2:
						move(oSon,{left:-201,top:0},{time:400});
						break;
						case 3:
						move(oSon,{left:0,top:-201},{time:400});
						break;
					}
					
				};
			}

		};
	</script>
</head>
<body>
	<ul id="oUl">
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
		<li><div></div></li>
	</ul>
</body>
</html>